(function(e){function t(t,i,s,o,u){function a(){d.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd");i&&n(i,s,o,u);u.startOrder=[];u.newOrder=[];u.origSort=[];u.checkSort=[];p.removeStyle(u.prefix+"filter, filter, "+u.prefix+"transform, transform, opacity, display").css(u.clean).removeAttr("data-checksum");window.atob||p.css({display:"none",opacity:"0"});d.removeStyle(u.prefix+"transition, transition, "+u.prefix+"perspective, perspective, "+u.prefix+"perspective-origin, perspective-origin, "+(u.resizeContainer?"height":""));"list"==u.layoutMode?(v.css({display:u.targetDisplayList,opacity:"1"}),u.origDisplay=u.targetDisplayList):(v.css({display:u.targetDisplayGrid,opacity:"1"}),u.origDisplay=u.targetDisplayGrid);u.origLayout=u.layoutMode;setTimeout(function(){p.removeStyle(u.prefix+"transition, transition");u.mixing=!1;if("function"==typeof u.onMixEnd){var e=u.onMixEnd.call(this,u);u=e?e:u}})}clearInterval(u.failsafe);u.mixing=!0;u.filter=t;if("function"==typeof u.onMixStart){var f=u.onMixStart.call(this,u);u=f?f:u}for(var l=u.transitionSpeed,f=0;2>f;f++){var c=0==f?c=u.prefix:"";u.transition[c+"transition"]="all "+l+"ms linear";u.transition[c+"transform"]=c+"translate3d(0,0,0)";u.perspective[c+"perspective"]=u.perspectiveDistance+"px";u.perspective[c+"perspective-origin"]=u.perspectiveOrigin}var h=u.targetSelector,p=o.find(h);p.each(function(){this.data={}});var d=p.parent();d.css(u.perspective);u.easingFallback="ease-in-out";"smooth"==u.easing&&(u.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)");"snap"==u.easing&&(u.easing="cubic-bezier(0.77, 0, 0.175, 1)");"windback"==u.easing&&(u.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",u.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)");"windup"==u.easing&&(u.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",u.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");f="list"==u.layoutMode&&null!=u.listEffects?u.listEffects:u.effects;Array.prototype.indexOf&&(u.fade=-1<f.indexOf("fade")?"0":"",u.scale=-1<f.indexOf("scale")?"scale(.01)":"",u.rotateZ=-1<f.indexOf("rotateZ")?"rotate(180deg)":"",u.rotateY=-1<f.indexOf("rotateY")?"rotateY(90deg)":"",u.rotateX=-1<f.indexOf("rotateX")?"rotateX(90deg)":"",u.blur=-1<f.indexOf("blur")?"blur(8px)":"",u.grayscale=-1<f.indexOf("grayscale")?"grayscale(100%)":"");var v=e(),m=e(),g=[],b=!1;"string"==typeof t?g=r(t):(b=!0,e.each(t,function(e){g[e]=r(this)}));"or"==u.filterLogic?(""==g[0]&&g.shift(),1>g.length?m=m.add(o.find(h+":visible")):p.each(function(){var t=e(this);if(b){var n=0;e.each(g,function(){this.length?t.is("."+this.join(", ."))&&n++:0<n&&n++});n==g.length?v=v.add(t):m=m.add(t)}else t.is("."+g.join(", ."))?v=v.add(t):m=m.add(t)})):(v=v.add(d.find(h+"."+g.join("."))),m=m.add(d.find(h+":not(."+g.join(".")+"):visible")));t=v.length;var E=e(),S=e(),x=e();m.each(function(){var t=e(this);"none"!=t.css("display")&&(E=E.add(t),x=x.add(t))});if(v.filter(":visible").length==t&&!E.length&&!i){if(u.origLayout==u.layoutMode)return a(),!1;if(1==v.length)return"list"==u.layoutMode?(o.addClass(u.listClass),o.removeClass(u.gridClass),x.css("display",u.targetDisplayList)):(o.addClass(u.gridClass),o.removeClass(u.listClass),x.css("display",u.targetDisplayGrid)),a(),!1}u.origHeight=d.height();if(v.length){o.removeClass(u.failClass);v.each(function(){var t=e(this);"none"==t.css("display")?S=S.add(t):x=x.add(t)});if(u.origLayout!=u.layoutMode&&0==u.animateGridList)return"list"==u.layoutMode?(o.addClass(u.listClass),o.removeClass(u.gridClass),x.css("display",u.targetDisplayList)):(o.addClass(u.gridClass),o.removeClass(u.listClass),x.css("display",u.targetDisplayGrid)),a(),!1;if(!window.atob)return a(),!1;p.css(u.clean);x.each(function(){this.data.origPos=e(this).offset()});"list"==u.layoutMode?(o.addClass(u.listClass),o.removeClass(u.gridClass),S.css("display",u.targetDisplayList)):(o.addClass(u.gridClass),o.removeClass(u.listClass),S.css("display",u.targetDisplayGrid));S.each(function(){this.data.showInterPos=e(this).offset()});E.each(function(){this.data.hideInterPos=e(this).offset()});x.each(function(){this.data.preInterPos=e(this).offset()});"list"==u.layoutMode?x.css("display",u.targetDisplayList):x.css("display",u.targetDisplayGrid);i&&n(i,s,o,u);if(t=i)e:if(t=u.origSort,f=u.checkSort,t.length!=f.length)t=!1;else{for(c=0;c<f.length;c++)if(t[c].compare&&!t[c].compare(f[c])||t[c]!==f[c]){t=!1;break e}t=!0}if(t)return a(),!1;E.hide();S.each(function(){this.data.finalPos=e(this).offset()});x.each(function(){this.data.finalPrePos=e(this).offset()});u.newHeight=d.height();i&&n("reset",null,o,u);S.hide();x.css("display",u.origDisplay);"block"==u.origDisplay?(o.addClass(u.listClass),S.css("display",u.targetDisplayList)):(o.removeClass(u.listClass),S.css("display",u.targetDisplayGrid));u.resizeContainer&&d.css("height",u.origHeight+"px");t={};for(f=0;2>f;f++)c=0==f?c=u.prefix:"",t[c+"transform"]=u.scale+" "+u.rotateX+" "+u.rotateY+" "+u.rotateZ,t[c+"filter"]=u.blur+" "+u.grayscale;S.css(t);x.each(function(){var t=this.data,n=e(this);n.hasClass("mix_tohide")?(t.preTX=t.origPos.left-t.hideInterPos.left,t.preTY=t.origPos.top-t.hideInterPos.top):(t.preTX=t.origPos.left-t.preInterPos.left,t.preTY=t.origPos.top-t.preInterPos.top);for(var r={},i=0;2>i;i++){var s=0==i?s=u.prefix:"";r[s+"transform"]="translate("+t.preTX+"px,"+t.preTY+"px)"}n.css(r)});"list"==u.layoutMode?(o.addClass(u.listClass),o.removeClass(u.gridClass)):(o.addClass(u.gridClass),o.removeClass(u.listClass));setTimeout(function(){if(u.resizeContainer){for(var t={},n=0;2>n;n++){var r=0==n?r=u.prefix:"";t[r+"transition"]="all "+l+"ms ease-in-out";t.height=u.newHeight+"px"}d.css(t)}E.css("opacity",u.fade);S.css("opacity",1);S.each(function(){var t=this.data;t.tX=t.finalPos.left-t.showInterPos.left;t.tY=t.finalPos.top-t.showInterPos.top;for(var n={},r=0;2>r;r++){var i=0==r?i=u.prefix:"";n[i+"transition-property"]=i+"transform, "+i+"filter, opacity";n[i+"transition-timing-function"]=u.easing+", linear, linear";n[i+"transition-duration"]=l+"ms";n[i+"transition-delay"]="0";n[i+"transform"]="translate("+t.tX+"px,"+t.tY+"px)";n[i+"filter"]="none"}e(this).css("-webkit-transition","all "+l+"ms "+u.easingFallback).css(n)});x.each(function(){var t=this.data;t.tX=0!=t.finalPrePos.left?t.finalPrePos.left-t.preInterPos.left:0;t.tY=0!=t.finalPrePos.left?t.finalPrePos.top-t.preInterPos.top:0;for(var n={},r=0;2>r;r++){var i=0==r?i=u.prefix:"";n[i+"transition"]="all "+l+"ms "+u.easing;n[i+"transform"]="translate("+t.tX+"px,"+t.tY+"px)"}e(this).css("-webkit-transition","all "+l+"ms "+u.easingFallback).css(n)});t={};for(n=0;2>n;n++)r=0==n?r=u.prefix:"",t[r+"transition"]="all "+l+"ms "+u.easing+", "+r+"filter "+l+"ms linear, opacity "+l+"ms linear",t[r+"transform"]=u.scale+" "+u.rotateX+" "+u.rotateY+" "+u.rotateZ,t[r+"filter"]=u.blur+" "+u.grayscale,t.opacity=u.fade;E.css(t);d.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(t){if(-1<t.originalEvent.propertyName.indexOf("transform")||-1<t.originalEvent.propertyName.indexOf("opacity"))-1<h.indexOf(".")?e(t.target).hasClass(h.replace(".",""))&&a():e(t.target).is(h)&&a()})},10);u.failsafe=setTimeout(function(){u.mixing&&a()},l+400)}else{u.resizeContainer&&d.css("height",u.origHeight+"px");if(!window.atob)return a(),!1;E=m;setTimeout(function(){d.css(u.perspective);if(u.resizeContainer){for(var e={},t=0;2>t;t++){var n=0==t?n=u.prefix:"";e[n+"transition"]="height "+l+"ms ease-in-out";e.height=u.minHeight+"px"}d.css(e)}p.css(u.transition);if(m.length){e={};for(t=0;2>t;t++)n=0==t?n=u.prefix:"",e[n+"transform"]=u.scale+" "+u.rotateX+" "+u.rotateY+" "+u.rotateZ,e[n+"filter"]=u.blur+" "+u.grayscale,e.opacity=u.fade;E.css(e);d.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(e){if(-1<e.originalEvent.propertyName.indexOf("transform")||-1<e.originalEvent.propertyName.indexOf("opacity"))o.addClass(u.failClass),a()})}else u.mixing=!1},10)}}function n(t,n,r,i){function s(e,n){var r=isNaN(1*e.attr(t))?e.attr(t).toLowerCase():1*e.attr(t),i=isNaN(1*n.attr(t))?n.attr(t).toLowerCase():1*n.attr(t);return r<i?-1:r>i?1:0}function o(e){"asc"==n?u.prepend(e).prepend(" "):u.append(e).append(" ")}r.find(i.targetSelector).wrapAll('<div class="mix_sorter"/>');var u=r.find(".mix_sorter");i.origSort.length||u.find(i.targetSelector+":visible").each(function(){e(this).wrap("<s/>");i.origSort.push(e(this).parent().html().replace(/\s+/g,""));e(this).unwrap()});u.empty();if("reset"==t)e.each(i.startOrder,function(){u.append(this).append(" ")});else if("default"==t)e.each(i.origOrder,function(){o(this)});else if("random"==t){if(!i.newOrder.length){for(var a=i.startOrder.slice(),f=a.length,l=f;l--;){var c=parseInt(Math.random()*f),h=a[l];a[l]=a[c];a[c]=h}i.newOrder=a}e.each(i.newOrder,function(){u.append(this).append(" ")})}else if("custom"==t)e.each(n,function(){o(this)});else{if("undefined"==typeof i.origOrder[0].attr(t))return console.log("No such attribute found. Terminating"),!1;i.newOrder.length||(e.each(i.origOrder,function(){i.newOrder.push(e(this))}),i.newOrder.sort(s));e.each(i.newOrder,function(){o(this)})}i.checkSort=[];u.find(i.targetSelector+":visible").each(function(t){var n=e(this);0==t&&n.attr("data-checksum","1");n.wrap("<s/>");i.checkSort.push(n.parent().html().replace(/\s+/g,""));n.unwrap()});r.find(i.targetSelector).unwrap()}function r(t){t=t.replace(/\s{2,}/g," ");var n=t.split(" ");e.each(n,function(e){"all"==this&&(n[e]="mix_all")});""==n[0]&&n.shift();return n}var i={init:function(r){return this.each(function(){var i={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};r&&e.extend(i,r);this.config=i;e.support.touch="ontouchend"in document;e.support.touch&&(i.isTouch=!0,i.resetDelay=350);i.container=e(this);var s=i.container,o;e:{o=s[0];for(var u=["Webkit","Moz","O","ms"],a=0;a<u.length;a++)if(u[a]+"Transition"in o.style){o=u[a];break e}o="transition"in o.style?"":!1}i.prefix=o;i.prefix=i.prefix?"-"+i.prefix.toLowerCase()+"-":"";s.find(i.targetSelector).each(function(){i.origOrder.push(e(this))});if(i.sortOnLoad){var f;e.isArray(i.sortOnLoad)?(o=i.sortOnLoad[0],f=i.sortOnLoad[1],e(i.sortSelector+"[data-sort="+i.sortOnLoad[0]+"][data-order="+i.sortOnLoad[1]+"]").addClass("current-item")):(e(i.sortSelector+"[data-sort="+i.sortOnLoad+"]").addClass("current-item"),o=i.sortOnLoad,i.sortOnLoad="desc");n(o,f,s,i)}for(f=0;2>f;f++)o=0==f?o=i.prefix:"",i.transition[o+"transition"]="all "+i.transitionSpeed+"ms ease-in-out",i.perspective[o+"perspective"]=i.perspectiveDistance+"px",i.perspective[o+"perspective-origin"]=i.perspectiveOrigin;for(f=0;2>f;f++)o=0==f?o=i.prefix:"",i.clean[o+"transition"]="none";"list"==i.layoutMode?(s.addClass(i.listClass),i.origDisplay=i.targetDisplayList):(s.addClass(i.gridClass),i.origDisplay=i.targetDisplayGrid);i.origLayout=i.layoutMode;f=i.showOnLoad.split(" ");e.each(f,function(){e(i.filterSelector+'[data-filter="'+this+'"]').addClass("current-item")});s.find(i.targetSelector).addClass("mix_all");"all"==f[0]&&(f[0]="mix_all",i.showOnLoad="mix_all");var l=e();e.each(f,function(){l=l.add(e("."+this))});l.each(function(){var t=e(this);"list"==i.layoutMode?t.css("display",i.targetDisplayList):t.css("display",i.targetDisplayGrid);t.css(i.transition)});setTimeout(function(){i.mixing=!0;l.css("opacity","1");setTimeout(function(){"list"==i.layoutMode?l.removeStyle(i.prefix+"transition, transition").css({display:i.targetDisplayList,opacity:1}):l.removeStyle(i.prefix+"transition, transition").css({display:i.targetDisplayGrid,opacity:1});i.mixing=!1;if("function"==typeof i.onMixLoad){var e=i.onMixLoad.call(this,i);i=e?e:i}},i.transitionSpeed)},10);i.filter=i.showOnLoad;e(i.sortSelector).bind(i.buttonEvent,function(){if(!i.mixing){var n=e(this),r=n.attr("data-sort"),o=n.attr("data-order");if(n.hasClass("current-item")){if("random"!=r)return!1}else e(i.sortSelector).removeClass("current-item"),n.addClass("current-item");s.find(i.targetSelector).each(function(){i.startOrder.push(e(this))});t(i.filter,r,o,s,i)}});e(i.filterSelector).bind(i.buttonEvent,function(){if(!i.mixing){var n=e(this);if(0==i.multiFilter)e(i.filterSelector).removeClass("current-item"),n.addClass("current-item"),i.filter=n.attr("data-filter"),e(i.filterSelector+'[data-filter="'+i.filter+'"]').addClass("current-item");else{var r=n.attr("data-filter");n.hasClass("current-item")?(n.removeClass("current-item"),i.filter=i.filter.replace(RegExp("(\\s|^)"+r),"")):(n.addClass("current-item"),i.filter=i.filter+" "+r)}t(i.filter,null,null,s,i)}})})},toGrid:function(){return this.each(function(){var n=this.config;"grid"!=n.layoutMode&&(n.layoutMode="grid",t(n.filter,null,null,e(this),n))})},toList:function(){return this.each(function(){var n=this.config;"list"!=n.layoutMode&&(n.layoutMode="list",t(n.filter,null,null,e(this),n))})},filter:function(n){return this.each(function(){var r=this.config;r.mixing||(e(r.filterSelector).removeClass("current-item"),e(r.filterSelector+'[data-filter="'+n+'"]').addClass("current-item"),t(n,null,null,e(this),r))})},sort:function(n){return this.each(function(){var r=this.config,i=e(this);if(!r.mixing){e(r.sortSelector).removeClass("current-item");if(e.isArray(n)){var s=n[0],o=n[1];e(r.sortSelector+'[data-sort="'+n[0]+'"][data-order="'+n[1]+'"]').addClass("current-item")}else e(r.sortSelector+'[data-sort="'+n+'"]').addClass("current-item"),s=n,o="desc";i.find(r.targetSelector).each(function(){r.startOrder.push(e(this))});t(r.filter,s,o,i,r)}})},multimix:function(n){return this.each(function(){var r=this.config,i=e(this);multiOut={filter:r.filter,sort:null,order:"desc",layoutMode:r.layoutMode};e.extend(multiOut,n);r.mixing||(e(r.filterSelector).add(r.sortSelector).removeClass("current-item"),e(r.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("current-item"),"undefined"!=typeof multiOut.sort&&(e(r.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("current-item"),i.find(r.targetSelector).each(function(){r.startOrder.push(e(this))})),r.layoutMode=multiOut.layoutMode,t(multiOut.filter,multiOut.sort,multiOut.order,i,r))})},remix:function(n){return this.each(function(){var r=this.config,i=e(this);r.origOrder=[];i.find(r.targetSelector).each(function(){var t=e(this);t.addClass("mix_all");r.origOrder.push(t)});!r.mixing&&"undefined"!=typeof n&&(e(r.filterSelector).removeClass("current-item"),e(r.filterSelector+'[data-filter="'+n+'"]').addClass("current-item"),t(n,null,null,i,r))})}};e.fn.mixitup=function(e,t){if(i[e])return i[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof e||!e)return i.init.apply(this,arguments)};e.fn.removeStyle=function(t){return this.each(function(){var n=e(this);t=t.replace(/\s+/g,"");var r=t.split(",");e.each(r,function(){var e=RegExp(this.toString()+"[^;]+;?","g");n.attr("style",function(t,n){if(n)return n.replace(e,"")})})})}})(jQuery);